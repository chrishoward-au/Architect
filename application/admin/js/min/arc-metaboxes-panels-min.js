jQuery(document).ready(function(){"use strict";function e(){var e=jQuery("#_panels_design_preview-text").val(),t=jQuery.parseJSON(e);return t}function t(e){var t="";jQuery.each(e,function(e,a){if(a.show){e="image"===e?"feature":e;var s=a.width,n=jQuery('input[name="_architect[_panels_design_feature-location]"]:checked');s="fill"===n.val()&&"feature"==e?"100":s,t=t+" <strong>"+e+":</strong> "+s+"% &nbsp;&nbsp;&nbsp;"}}),jQuery("p.pzarc-states").html("Order: "+t),jQuery("input#_panels_design_preview-text").val(JSON.stringify(e))}function a(a){var s=jQuery(a).data("idcode"),n=jQuery(".pzarc-content-area").width(),i=Math.floor(jQuery(a).width()/n*100),c=e();c=r(c,s,i),t(c),jQuery(a).width(i+"%")}function s(e){var t={},a=jQuery(".pzarc-dropzone .pzarc-content-area").sortable("toArray",{attribute:"data-idcode"});return jQuery.each(a,function(a,s){t[s]=e[s]}),t}function n(e){var a=jQuery("fieldset#_architect-_panels_design_components-to-show input");return jQuery.each(a,function(t,a){""!==a.value&&(e[a.value].show=a.checked,a.checked?(jQuery(".pzarc-draggable-"+a.value).show(),jQuery(".pzarc-draggable-"+a.value).css("width",e[a.value].width+"%")):jQuery(".pzarc-draggable-"+a.value).hide())}),u(jQuery('input[name="_architect[_panels_settings_feature-type]"]:checked').get(0).value),i(e),t(e),e}function r(e,t,a){return e[t].width=a,e}function i(e){var a="none";jQuery('input[name="_architect[_panels_design_feature-location]"]').each(function(){this.checked&&(a=this.value)}),jQuery(".pzarc-draggable-excerpt img.pzarc-align").addClass("none").removeClass("left right"),jQuery(".pzarc-draggable-content img.pzarc-align").addClass("none").removeClass("left right"),jQuery(".pzarc-draggable-image").removeClass("left right");var s=jQuery(".pzarc-dropzone .pzgp-cell-image-behind");s.html(""),jQuery(".pzarc-draggable-image").hide();var n=jQuery("input#_panels_design_components-to-show-buttonsetimage").prop("checked");if(n){switch(a){case"fill":s.html('<img  class="feature-image-video" src="'+g+"/shared/assets/images/sample-"+jQuery('input[name="_architect[_panels_settings_feature-type]"]:checked').get(0).value+'.jpg"/>'),s.css({left:"0",top:"0",right:"",bottom:"",width:"100%",height:"auto",position:"absolute"});break;case"components":jQuery(".pzarc-draggable-image").show(),jQuery("#_panels_design_feature-float-buttonsetright:checked").length&&jQuery(".pzarc-draggable-image").addClass("right");break;case"content-left":jQuery("#_panels_design_feature-in-buttonsetexcerpt:checked").length&&jQuery(".pzarc-draggable-excerpt img.pzarc-align").removeClass("right none").addClass("left"),jQuery("#_panels_design_feature-in-buttonsetcontent:checked").length&&jQuery(".pzarc-draggable-content img.pzarc-align").removeClass("right none").addClass("left");break;case"content-right":jQuery("#_panels_design_feature-in-buttonsetexcerpt:checked").length&&jQuery(".pzarc-draggable-excerpt img.pzarc-align").removeClass("left none").addClass("right"),jQuery("#_panels_design_feature-in-buttonsetcontent:checked").length&&jQuery(".pzarc-draggable-content img.pzarc-align").removeClass("left none").addClass("right");break;case"float":s.html('<img  class="feature-image-video" src="'+g+"shared/assets/images/sample-"+jQuery('input[name="_architect[_panels_settings_feature-type]"]:checked').get(0).value+'.jpg"/>');var r=jQuery(".pzarc-content-area").get(0).clientWidth,i=jQuery(".pzarc-content-area").get(0).clientHeight,c="top";jQuery('input[name="_architect[_panels_design_components-position]"]').each(function(){this.checked&&(c=this.value)});var o=jQuery(".pzarc-dropzone .pzgp-cell-image-behind img");switch(c){case"left":o.css({height:"auto",width:"100%",left:"",position:"relative"}),s.css({width:450-r+"px",left:"",right:"0",top:"",bottom:"",position:"absolute"});break;case"right":o.css({height:"auto",width:"100%",left:"",position:"relative"}),s.css({width:450-r+"px",right:"",left:"0",top:"",bottom:"",position:"absolute"});break;case"top":o.css({width:"100%",height:"150px",left:"",position:"relative"}),s.css({top:i+"px",right:"",left:"",bottom:"",width:"100%",position:"relative"});break;case"bottom":o.css({width:"100%",height:"150px",left:"",position:"relative"}),s.css({bottom:i+"px",right:"",top:"0",left:"",width:"100%",position:"relative"})}break;case"none":s.html("")}t(e)}}function c(e){var a="top";switch(jQuery('input[name="_architect[_panels_design_components-position]"]').each(function(){this.checked&&(a=this.value)}),a){case"bottom":jQuery(".pzarc-content-area").css({bottom:"0",top:"",left:"",right:""});break;case"top":jQuery(".pzarc-content-area").css({bottom:"",top:"0",left:"",right:""});break;case"left":jQuery(".pzarc-content-area").css({bottom:"0",top:"0",left:"0",right:""}),jQuery(".pzgp-cell-image-behind").css("right","0");break;case"right":jQuery(".pzarc-content-area").css({bottom:"0",top:"0",left:"",right:"0"}),jQuery(".pzgp-cell-image-behind").css("left","0")}t(e)}function o(){jQuery(".pzarc-content-area").css("width",jQuery("fieldset#_architect-_panels_design_components-widths .redux-slider-label").text()+"%")}function p(){var e=[jQuery("fieldset#_architect-_panels_design_components-nudge-x .redux-slider-label").text(),jQuery("fieldset#_architect-_panels_design_components-nudge-y .redux-slider-label").text()],t="top";jQuery('input[name="_architect[_panels_design_components-position]"]').each(function(){this.checked&&(t=this.value)}),"left"===t?jQuery(".pzarc-content-area").css("marginLeft",e[0]+"%").css("marginTop",e[1]+"%"):"top"===t?jQuery(".pzarc-content-area").css("marginLeft",e[0]+"%").css("marginTop",e[1]+"%"):"right"===t?jQuery(".pzarc-content-area").css("marginRight",e[0]+"%").css("marginTop",e[1]+"%"):"bottom"===t&&jQuery(".pzarc-content-area").css("marginLeft",e[0]+"%").css("marginBottom",e[1]+"%")}function l(e){console.log(e);var t=jQuery("#_architect-_blueprint_tabs_tabs"),a;a=void 0===e.target?e:e.target,jQuery(a).each(function(){var e=!0;switch(this.value){case"title":e=1===jQuery("input#_panels_design_components-to-show-buttonsettitle:checked").length;var a=jQuery(t).find("#tab-titles");e?a.removeClass("pztabs-unused").removeAttr("title"):a.addClass("pztabs-unused").attr("title","Titles not used in this Blueprint");break;case"meta1":case"meta2":case"meta3":e=1===jQuery("input#_panels_design_components-to-show-buttonsetmeta1:checked").length||1===jQuery("input#_panels_design_components-to-show-buttonsetmeta2:checked").length||1===jQuery("input#_panels_design_components-to-show-buttonsetmeta3:checked").length;var s=jQuery(t).find("#tab-meta");e?s.removeClass("pztabs-unused").removeAttr("title"):s.addClass("pztabs-unused").attr("title","No meta fields used in this Blueprint");break;case"content":case"excerpt":e=1===jQuery("input#_panels_design_components-to-show-buttonsetcontent:checked").length||1===jQuery("input#_panels_design_components-to-show-buttonsetexcerpt:checked").length;var n=jQuery(t).find("#tab-body");e?n.removeClass("pztabs-unused").removeAttr("title"):n.addClass("pztabs-unused").attr("title","Body/excerpt not used in this Blueprint");break;case"image":e=1===jQuery("input#_panels_design_components-to-show-buttonsetimage:checked").length;var r=jQuery(t).find("#tab-features");e?r.removeClass("pztabs-unused").removeAttr("title"):r.addClass("pztabs-unused").attr("title","Featured image/video not used in this Blueprint");break;case"custom1":case"custom2":case"custom3":e=1===jQuery("input#_panels_design_components-to-show-buttonsetcustom1:checked").length||1===jQuery("input#_panels_design_components-to-show-buttonsetcustom2:checked").length||1===jQuery("input#_panels_design_components-to-show-buttonsetcustom3:checked").length;var i=jQuery(t).find("#tab-customfields");e?i.removeClass("pztabs-unused").removeAttr("title"):i.addClass("pztabs-unused").attr("title","No custom fields used in this Blueprint")}})}function u(e){jQuery("img.feature-image-video").each(function(){"image"===e?this.src=this.src.replace(/sample-video.jpg/g,"sample-image.jpg"):"video"===e&&(this.src=this.src.replace(/sample-image.jpg/g,"sample-video.jpg"))})}function d(e,t){o(e);var a=jQuery(".pzgp-cell-image-behind").detach(),s=jQuery(".pzarc-content-area").detach();if(1===jQuery("input#_panels_design_feature-location-buttonsetfloat:checked").length)switch(!0){case 1===jQuery("input#_panels_design_components-position-buttonsetleft:checked").length||1===jQuery("input#_panels_design_components-position-buttonsetright:checked").length:console.log("left || right"),jQuery(".pzarc-dropzone").append(a).append(s),jQuery(".pzgp-cell-image-behind").width(100-t.textContent+"%").css("position","absolute"),jQuery(".pzarc-content-area").css("position","absolute");break;case 1===jQuery("input#_panels_design_components-position-buttonsetbottom:checked").length:console.log("bottom"),jQuery(".pzarc-dropzone").append(a).append(s),jQuery(".pzarc-content-area").css("position","relative"),jQuery(".pzgp-cell-image-behind").css("position","relative");break;case 1===jQuery("input#_panels_design_components-position-buttonsettop:checked").length:console.log("top"),jQuery(".pzarc-dropzone").append(s).append(a),jQuery(".pzarc-content-area").css("position","relative"),jQuery(".pzgp-cell-image-behind").css("position","relative")}else jQuery(".pzarc-dropzone").append(a).append(s),jQuery(".pzgp-cell-image-behind").css("position","absolute"),jQuery(".pzarc-content-area").css("position","absolute")}jQuery("input#_panels_settings_short-name-text").attr("required","required"),jQuery("input#_panels_settings_short-name-text").attr("pattern","[a-zA-Z0-9-_]+"),jQuery("input#_panels_settings_short-name").attr("required","required"),jQuery("input#_panels_settings_short-name").attr("pattern","[a-zA-Z0-9-_]+"),jQuery("fieldset#_architect-_blueprints_content-source").on("change",function(){l(jQuery("#_architect-_panels_design_components-to-show .buttonset .buttonset-item"))}),l(jQuery("#_architect-_panels_design_components-to-show .buttonset .buttonset-item"));var g=jQuery("fieldset#_architect-_panels_design_preview .plugin_url").text(),h=e();t(h),jQuery('input[name="_architect[_panels_design_feature-location]"]').on("click",function(t){var a=e();i(a),l(t)}),jQuery("#_architect-_panels_design_feature-in").on("click",function(t){var a=e();i(a)}),jQuery("#_architect-_panels_design_feature-float").on("click",function(t){var a=e();i(a)}),jQuery('input[name="_architect[_panels_settings_feature-type]"]').on("click",function(){var e=this.value;u(e)}),jQuery("fieldset#_architect-_panels_design_components-to-show input").change(function(t){var a=t.target;switch(a.value){case"image":var s=jQuery("fieldset#_architect-_panels_design_feature-location").parentsUntil("tbody");"checked"!==jQuery(a).attr("checked")?s.hide():s.show();break;case"custom1xxx":case"custom2xxx":case"custom3xxx":var r=jQuery("fieldset#_architect-_panels_design_custom-fields-count").parentsUntil("tbody");"checked"===jQuery("fieldset#_architect-_panels_design_components-to-show input#_panels_design_components-to-show-buttonsetcustom1")||"checked"===jQuery("fieldset#_architect-_panels_design_components-to-show input#_panels_design_components-to-show-buttonsetcustom2")||"checked"===jQuery("fieldset#_architect-_panels_design_components-to-show input#_panels_design_components-to-show-buttonsetcustom3")?r.show():(console.log("checked"===jQuery("fieldset#_architect-_panels_design_components-to-show input#_panels_design_components-to-show-buttonsetcustom1"),"checked"===jQuery("fieldset#_architect-_panels_design_components-to-show input#_panels_design_components-to-show-buttonsetcustom2"),"checked"===jQuery("fieldset#_architect-_panels_design_components-to-show input#_panels_design_components-to-show-buttonsetcustom3")),r.hide())}var i=e();n(i,t),l(t)}),jQuery('input[name="_architect[_panels_design_components-position]"]').on("click",function(){var t=e();c(t),d(t,jQuery("fieldset#_architect-_panels_design_components-widths .redux-slider-label")),i(t)}),jQuery('input[name="_architect[panels_settingds_panel-height-type]"]').on("click",function(){}),jQuery("fieldset#_architect-_panels_design_components-widths .redux-slider-label").on("DOMSubtreeModified",function(){var t=e();d(t,this)}),jQuery("fieldset#_architect-_panels_design_components-nudge-x .redux-slider-label").on("DOMSubtreeModified",function(){var t=e();p(t)}),jQuery("fieldset#_architect-_panels_design_components-nudge-y  .redux-slider-label").on("DOMSubtreeModified",function(){var t=e();p(t)}),jQuery(".pzarc-dropzone .pzarc-content-area").sortable({cursor:"move",opacity:.6,forceHelperSize:!0,sort:function(){jQuery(this).removeClass("ui-state-default")},update:function(){var a=e();a=s(a),t(a)},create:function(){var a=[];a.title='<span class="pzarc-draggable pzarc-draggable-title" title= "Post title" data-idcode=title style="display: inline-block;font-weight:bold;font-size:15px;"><span>This is the Title</span></span>',a.meta1='<span class="pzarc-draggable pzarc-draggable-meta1 pzarc-draggable-meta"  title= "Meta info 1" data-idcode=meta1 style="font-size:11px;"><span>Jan 1 2013</span></span>',a.meta2='<span class="pzarc-draggable pzarc-draggable-meta2 pzarc-draggable-meta" title= "Meta info 2"  data-idcode=meta2 style="font-size:11px;"><span>Categories - News, Sport</span></span>',a.image='<span class="pzarc-draggable pzarc-draggable-image"  title= "Feature" data-idcode=image style="max-height:100px;overflow:hidden;"><span><img src="PZARC_PLUGIN_URL/shared/assets/images/sample-'+jQuery('input[name="_architect[_panels_settings_feature-type]"]:checked').get(0).value+'.jpg" style="max-width:100%;" class="feature-image-video"/></span></span>',a.image=a.image.replace(/PZARC_PLUGIN_URL/g,g),a.content='<span class="pzarc-draggable pzarc-draggable-content" title= "Full post content"  data-idcode=content style="font-size:13px;"><span><img  src="PZARC_PLUGIN_URL/shared/assets/images/sample-'+jQuery('input[name="_architect[_panels_settings_feature-type]"]:checked').get(0).value+'.jpg" class="pzarc-align feature-image-video '+jQuery("select#_pzarc_layout-excerpt-thumb-cmb-field-0").val()+'" style="max-width:20%;"/><img src="PZARC_PLUGIN_URL/shared/assets/images/sample-in-content.jpg" style="max-width:30%;float:left;padding:5px;"/>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam quis justo erat. <ul><li>&nbsp;&bull;&nbsp;Cras semper sem hendrerit</li><li>&nbsp;&bull;&nbsp;Tortor porta at auctor</li></ul></span></span>',a.content=a.content.replace(/PZARC_PLUGIN_URL/g,g),a.excerpt='<span class="pzarc-draggable pzarc-draggable-excerpt"  title= "Excerpt with featured image" data-idcode=excerpt style="font-size:13px;"><span><img  src="PZARC_PLUGIN_URL/shared/assets/images/sample-'+jQuery('input[name="_architect[_panels_settings_feature-type]"]:checked').get(0).value+'.jpg" class="pzarc-align feature-image-video '+jQuery("select#_pzarc_layout-excerpt-thumb-cmb-field-0").val()+'" style="max-width:20%;"/>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam quis justo erat. Cras semper sem hendre...[more]</span></span>',a.excerpt=a.excerpt.replace(/PZARC_PLUGIN_URL/g,g),a.meta3='<span class="pzarc-draggable pzarc-draggable-meta3 pzarc-draggable-meta"  title= "Meta info 3" data-idcode=meta3 style="font-size:11px;"><span>Comments: 27</span></span>',a.custom1='<span class="pzarc-draggable pzarc-draggable-custom1 pzarc-draggable-meta"  title= "Custom field 1" data-idcode=custom1 style="font-size:11px;"><span>Custom content group 1</span></span>',a.custom2='<span class="pzarc-draggable pzarc-draggable-custom2 pzarc-draggable-meta"  title= "Custom field 2" data-idcode=custom2 style="font-size:11px;"><span>Custom content group 2</span></span>',a.custom3='<span class="pzarc-draggable pzarc-draggable-custom3 pzarc-draggable-meta"  title= "Custom field 3" data-idcode=custom3 style="font-size:11px;"><span>Custom content group 3</span></span>';var s=e();jQuery(".pzarc-content-area.sortable").html(""),jQuery.each(s,function(e){jQuery(".pzarc-content-area.sortable").append(a[e])});var r=e();c(r),o(),p(),n(r),t(r)}}),jQuery(".pzarc-draggable").resizable({handles:"e",containment:"parent",grid:[4,1],minWidth:10,maxWidth:450,autoHide:!0,resize:function(){a(this)}})}),jQuery(window).load(function(){0===jQuery("#redux-_architect-metabox-panels-design ul.redux-group-menu li.active").length&&jQuery("#0_box_redux-_architect-metabox-panels-design_section_group_li").find("a").trigger("click")});